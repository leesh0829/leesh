@import 'tailwindcss';
@custom-variant dark (&:where(.dark, .dark *));

/* Aurora Glass Theme */
:root {
  --bg: #f7f8fb;
  --fg: #0b1020;
  --muted: #5b647a;

  --card: rgba(255, 255, 255, 0.72);
  --border: rgba(11, 16, 32, 0.12);
  --ring: rgba(109, 90, 255, 0.25);

  --accent: #6d5aff;
  --accent2: #26c6ff;
  --accent-foreground: #ffffff;

  --radius: 16px;
  --shadow: 0 10px 30px rgba(11, 16, 32, 0.08);
}

@theme inline {
  --color-background: var(--bg);
  --color-foreground: var(--fg);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg: #060712;
    --fg: #e7e9f3;
    --muted: #a8b0c7;

    --card: rgba(18, 20, 36, 0.6);
    --border: rgba(231, 233, 243, 0.14);
    --ring: rgba(109, 90, 255, 0.22);

    --accent: #8c7bff;
    --accent2: #32d1ff;
    --accent-foreground: #070813;

    --shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
  }
}

/* Manual theme override (takes precedence over system preference) */
:root[data-theme='light'] {
  --bg: #f7f8fb;
  --fg: #0b1020;
  --muted: #5b647a;

  --card: rgba(255, 255, 255, 0.72);
  --border: rgba(11, 16, 32, 0.12);
  --ring: rgba(109, 90, 255, 0.25);

  --accent: #6d5aff;
  --accent2: #26c6ff;
  --accent-foreground: #ffffff;

  --shadow: 0 10px 30px rgba(11, 16, 32, 0.08);
}

:root[data-theme='dark'] {
  --bg: #060712;
  --fg: #e7e9f3;
  --muted: #a8b0c7;

  --card: rgba(18, 20, 36, 0.6);
  --border: rgba(231, 233, 243, 0.14);
  --ring: rgba(109, 90, 255, 0.22);

  --accent: #8c7bff;
  --accent2: #32d1ff;
  --accent-foreground: #070813;

  --shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
}

@layer base {
  * {
    @apply outline-none;
    border-color: var(--border);
  }

  body {
    @apply min-h-dvh antialiased;
    color: var(--fg);
    background:
      radial-gradient(
        900px 500px at 10% 0%,
        rgba(109, 90, 255, 0.18),
        transparent 60%
      ),
      radial-gradient(
        900px 500px at 90% 10%,
        rgba(38, 198, 255, 0.14),
        transparent 55%
      ),
      radial-gradient(
        900px 700px at 50% 100%,
        rgba(109, 90, 255, 0.1),
        transparent 60%
      ),
      var(--bg);
    font-family:
      var(--font-sans),
      ui-sans-serif,
      system-ui,
      -apple-system,
      Segoe UI,
      Roboto,
      Helvetica,
      Arial,
      'Apple Color Emoji',
      'Segoe UI Emoji';
  }

  a {
    color: inherit;
    text-underline-offset: 4px;
  }

  a:hover {
    text-decoration: underline;
  }
}

@layer components {
  .container-page {
    @apply mx-auto w-full max-w-6xl px-3 sm:px-4 lg:px-10;
  }

  .surface {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    backdrop-filter: blur(10px);
  }

  .card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    backdrop-filter: blur(10px);
  }

  .card-pad {
    @apply p-3 sm:p-4 lg:p-6;
  }

  .btn {
    @apply inline-flex items-center justify-center gap-2 px-2.5 py-1.5 sm:px-3 sm:py-2 text-sm font-medium transition;
    border-radius: calc(var(--radius) - 8px);
    border: 1px solid var(--border);
    background: rgba(255, 255, 255, 0);
  }

  .btn:not(.btn-primary):hover {
    background: rgba(11, 16, 32, 0.04);
  }

  .btn:active {
    transform: scale(0.99);
  }

  .btn-primary {
    border: 0;
    color: var(--accent-foreground);
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    box-shadow: 0 10px 25px rgba(109, 90, 255, 0.18);
    background-size: 140% 140%;
    background-position: 0% 50%;
  }

  .btn-primary:hover {
    filter: none;
    background-position: 100% 50%;
    box-shadow: 0 14px 30px rgba(109, 90, 255, 0.28);
  }

  .btn-outline {
    background: rgba(255, 255, 255, 0);
  }

  .btn-ghost {
    border: 0;
    background: transparent;
  }

  .input,
  .select,
  .textarea {
    @apply w-full px-3 py-1.5 sm:py-2 text-sm;
    border-radius: calc(var(--radius) - 8px);
    border: 1px solid var(--border);
    background: rgba(255, 255, 255, 0);
  }

  /* Native select popup is OS-controlled; force readable option contrast. */
  .select option,
  .select optgroup {
    color: #111827;
    background: #ffffff;
  }

  .input:focus-visible,
  .select:focus-visible,
  .textarea:focus-visible {
    box-shadow: 0 0 0 6px var(--ring);
  }

  .textarea {
    @apply min-h-28;
  }

  .badge {
    @apply inline-flex items-center rounded-full px-2 py-0.5 text-xs;
    border: 1px solid var(--border);
    color: var(--muted);
    background: rgba(255, 255, 255, 0);
  }

  .nav-link {
    @apply block px-3 py-2 text-sm transition;
    border-radius: calc(var(--radius) - 10px);
    text-decoration: none;
  }

  .nav-link:not(.nav-link-active):hover {
    background: rgba(11, 16, 32, 0.04);
    text-decoration: none;
  }

  .nav-link-active {
    color: var(--accent-foreground);
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    text-decoration: none;
    box-shadow: 0 10px 25px rgba(109, 90, 255, 0.18);
    background-size: 140% 140%;
    background-position: 0% 50%;
  }

  .nav-link-active:hover {
    color: var(--accent-foreground);
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    text-decoration: none;
    filter: none;
    background-position: 100% 50%;
    box-shadow: 0 14px 30px rgba(109, 90, 255, 0.28);
  }

  .markdown-body {
    @apply text-base leading-8;
    color: var(--fg);
    overflow-wrap: anywhere;
    word-break: keep-all;
    line-break: auto;
  }

  .markdown-body > :first-child {
    margin-top: 0;
  }

  .markdown-body > :last-child {
    margin-bottom: 0;
  }

  .markdown-body h1,
  .markdown-body h2,
  .markdown-body h3,
  .markdown-body h4,
  .markdown-body h5,
  .markdown-body h6 {
    @apply font-semibold tracking-tight;
    color: var(--fg);
  }

  .markdown-body h1 {
    @apply mt-10 mb-4 text-3xl;
  }

  .markdown-body h2 {
    @apply mt-9 mb-3 text-2xl;
  }

  .markdown-body h3 {
    @apply mt-8 mb-3 text-xl;
  }

  .markdown-body h4 {
    @apply mt-7 mb-2 text-lg;
  }

  .markdown-body h5,
  .markdown-body h6 {
    @apply mt-6 mb-2 text-base;
  }

  .markdown-body p,
  .markdown-body ul,
  .markdown-body ol,
  .markdown-body blockquote,
  .markdown-body pre,
  .markdown-body table {
    @apply my-4;
  }

  .markdown-body ul,
  .markdown-body ol {
    @apply pl-6;
  }

  .markdown-body ul {
    list-style: disc;
  }

  .markdown-body ol {
    list-style: decimal;
  }

  .markdown-body li + li {
    @apply mt-1;
  }

  .markdown-body li > p {
    margin-top: 0;
    margin-bottom: 0;
  }

  .markdown-body a {
    color: var(--accent);
    text-decoration: underline;
    text-decoration-color: color-mix(in srgb, var(--accent), transparent 45%);
    text-decoration-thickness: 1.5px;
    text-underline-offset: 3px;
  }

  .markdown-body hr {
    @apply my-6 border-0;
    height: 1px;
    background: color-mix(in srgb, var(--border), transparent 20%);
  }

  .markdown-body blockquote {
    @apply rounded-r-lg pl-4 italic;
    border-left: 3px solid color-mix(in srgb, var(--accent), transparent 35%);
    color: color-mix(in srgb, var(--fg), transparent 18%);
    background: color-mix(in srgb, var(--accent), transparent 94%);
  }

  .markdown-body code {
    @apply rounded-md px-1.5 py-0.5 text-[0.86em];
    font-family:
      var(--font-mono),
      ui-monospace,
      SFMono-Regular,
      Menlo,
      Monaco,
      Consolas,
      'Liberation Mono',
      'Courier New',
      monospace;
    border: 1px solid color-mix(in srgb, var(--border), transparent 10%);
    background: color-mix(in srgb, var(--fg), transparent 95%);
  }

  .markdown-body pre {
    @apply overflow-x-auto rounded-xl p-4 text-[0.92rem] leading-7;
    border: 1px solid color-mix(in srgb, var(--border), transparent 4%);
    background: color-mix(in srgb, var(--bg), var(--fg) 8%);
  }

  .markdown-body pre code {
    @apply block rounded-none border-0 bg-transparent p-0 text-inherit;
    white-space: pre;
  }

  .dark .markdown-body pre {
    background: rgba(8, 12, 28, 0.92);
    border-color: rgba(148, 163, 184, 0.3);
  }

  .markdown-body table {
    @apply w-full border-collapse overflow-hidden rounded-xl text-sm;
    border: 1px solid color-mix(in srgb, var(--border), transparent 12%);
  }

  .markdown-body thead {
    background: color-mix(in srgb, var(--fg), transparent 95%);
  }

  .markdown-body th,
  .markdown-body td {
    @apply px-3 py-2 align-top;
    border: 1px solid color-mix(in srgb, var(--border), transparent 20%);
  }

  .markdown-body th {
    @apply text-left font-semibold;
  }

  .markdown-body img {
    @apply my-5 rounded-xl;
    max-width: 100%;
    height: auto;
    border: 1px solid color-mix(in srgb, var(--border), transparent 15%);
  }

  .loading-orbit {
    width: 56px;
    height: 56px;
    border-radius: 9999px;
    position: relative;
    background: conic-gradient(
      from 0deg,
      color-mix(in srgb, var(--accent), transparent 70%),
      var(--accent),
      var(--accent2),
      color-mix(in srgb, var(--accent2), transparent 70%)
    );
    animation: leesh-orbit-spin 0.95s linear infinite;
    box-shadow: 0 8px 24px color-mix(in srgb, var(--accent), transparent 70%);
  }

  .loading-orbit::after {
    content: '';
    position: absolute;
    inset: 6px;
    border-radius: inherit;
    background: var(--card);
    border: 1px solid var(--border);
  }

  .loading-dots {
    display: inline-flex;
    align-items: center;
    gap: 6px;
  }

  .loading-dots > span {
    width: 7px;
    height: 7px;
    border-radius: 9999px;
    background: color-mix(in srgb, var(--accent), var(--accent2) 35%);
    animation: leesh-dot-bounce 1s ease-in-out infinite;
  }

  .loading-dots > span:nth-child(2) {
    animation-delay: 0.15s;
  }

  .loading-dots > span:nth-child(3) {
    animation-delay: 0.3s;
  }
}

@keyframes leesh-orbit-spin {
  to {
    transform: rotate(360deg);
  }
}

@keyframes leesh-dot-bounce {
  0%,
  80%,
  100% {
    transform: translateY(0);
    opacity: 0.45;
  }

  40% {
    transform: translateY(-4px);
    opacity: 1;
  }
}

@media (hover: hover) and (pointer: fine) {
  .card,
  .surface,
  .btn,
  .nav-link {
    position: relative;
    overflow: hidden;
    isolation: isolate;
    transition:
      transform 180ms ease,
      box-shadow 220ms ease,
      border-color 220ms ease,
      background-color 220ms ease;
  }

  .card::after,
  .surface::after,
  .btn::after,
  .nav-link::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    background: linear-gradient(
      135deg,
      rgba(109, 90, 255, 0.13),
      rgba(38, 198, 255, 0.1)
    );
    opacity: 0;
    transform: translateY(6px);
    transition:
      opacity 220ms ease,
      transform 220ms ease;
  }

  .card:hover::after,
  .surface:hover::after,
  .btn:hover::after,
  .nav-link:hover::after {
    opacity: 0.95;
    transform: translateY(0);
  }

  .card:hover,
  .surface:hover {
    transform: translateY(-2px);
    border-color: rgba(109, 90, 255, 0.35);
    box-shadow: 0 16px 38px rgba(11, 16, 32, 0.14);
  }

  .btn:hover,
  .nav-link:hover {
    transform: translateY(-1px);
  }

  .btn-primary::after,
  .btn-primary:hover::after {
    opacity: 0 !important;
    transform: none !important;
  }

  .nav-link-active::after,
  .nav-link-active:hover::after {
    opacity: 0 !important;
    transform: none !important;
  }

  .card-hover-border-only::after {
    opacity: 0 !important;
    transform: none !important;
  }

  .card-hover-border-only:hover::after {
    opacity: 0 !important;
    transform: none !important;
  }
}

@media (max-width: 640px) {
  .input,
  .select,
  .textarea {
    font-size: 16px;
  }
}
